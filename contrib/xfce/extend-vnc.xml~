<?xml version="1.0" standalone="no"?>

<kickstart>

<description>
  Use XFCE and xdm instead of the default GNOME/gdm setup.
</description>


<changelog>
</changelog>

<main>
	<!-- kickstart 'main' commands go here -->
</main>

<pre>
	<!-- partitioning commands go here -->
</pre>


<post>


# get rid of the ugly X logo on the login screen
sed -i -e "/logoFileName/ s/^/#/g" /etc/X11/xdm/Xresources
# fix the borders
sed -i -e "/shdColor/ s/grey.*/black/g" /etc/X11/xdm/Xresources
sed -i -e "/hiColor/ s/grey.*/black/g" /etc/X11/xdm/Xresources
myhostname=$(hostname | cut -f1 -d.)
sed -i -e "/^xlogin\*greeting/ s/CLIENTHOST/$myhostname/" /etc/X11/xdm/Xresources


<file name="/etc/X11/xdm/xdm-config" mode="append">
DisplayManager.*.setup:         /etc/X11/xdm/Xsetup
</file>

<file name="/etc/X11/xdm/Xsetup" perm="0755">
<eval>
cat /export/rocks/install/extras/vnc/Xsetup
</eval>
</file>


#default XFCE setup without the stupid center toolbar at the bottom of the screen (thanks Jonas)
<file name="/etc/xdg/xfce4/panel/default.xml">
<eval>
  cat  /export/rocks/install/extras/vnc/default.xml
</eval>
</file>

# fix default apps in xfce
<file name="/etc/xdg/xfce4/helpers.rc">
<eval>
  cat  /export/rocks/install/extras/vnc/helpers.rc
</eval>
</file>

</post>

</kickstart> 

